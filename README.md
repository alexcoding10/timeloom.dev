# üìö Trabajo de Fin de Grado (TFG)

## üóÇÔ∏è √çndice

1. [Introducci√≥n](#1-introducci√≥n)  
    1.1 [TimeLoom ‚Äî ¬øDe d√≥nde viene?](#11-timeloom--de-d√≥nde-viene)  
    1.2 [Metodolog√≠a](#12-metodolog√≠a)

2. [Estado del Arte / Marco Te√≥rico](#2-estado-del-arte--marco-te√≥rico)

3. [Requisitos](#3-requisitos)  
    3.1 [Requisitos funcionales](#31-requisitos-funcionales-rf)  
    3.2 [Requisitos no funcionales](#32-requisitos-no-funcionales-rnf)

4. [Dise√±o](#4-dise√±o)  
    4.1 [Arquitectura General](#41-arquitectura-general)  
    4.2 [Dise√±o de Datos](#42-dise√±o-de-datos)  
    4.3 [Dise√±o de la Interfaz](#43-dise√±o-de-la-interfaz)

5. [Implementaci√≥n](#5-implementaci√≥n)  
6. [Pruebas](#6-pruebas)  
7. [Conclusiones](#7-conclusiones)  
8. [L√≠neas de Investigaci√≥n Futuras](#8-l√≠neas-de-investigaci√≥n-futuras)  
9. [Anexos](#9-anexos)  
10. [Bibliograf√≠a](#10-bibliograf√≠a)


---
## üìå 1 Introducci√≥n

### 1.1 TimeLoom ‚Äî De d√≥nde viene

**TimeLoom** nace de la idea de gestionar la dif√≠cil tarea del control del cumplimiento del turno laboral de los trabajadores de una empresa. Est√° pensado para que sea accesible a cualquier empresa, garantizando el cumplimiento de horarios y optimizando la administraci√≥n del personal.

En su versi√≥n final, este sistema deber√≠a facilitar la gesti√≥n de n√≥minas, el monitoreo del cumplimiento horario y la comunicaci√≥n interna entre los trabajadores.

---

## üß™ 1.2 Metodolog√≠a

El desarrollo del proyecto se abord√≥ mediante una metodolog√≠a pr√°ctica, centrada en la soluci√≥n de un problema real relacionado con la gesti√≥n del control horario. Las etapas fueron:

1. **Definici√≥n del problema:**  
   Identifiqu√© que muchas empresas necesitan una herramienta para controlar de forma eficiente que sus empleados cumplan con los horarios establecidos.

2. **Selecci√≥n del stack tecnol√≥gico:**  
   Esta etapa fue clave. Realic√© una b√∫squeda intensiva de informaci√≥n para elegir tecnolog√≠as que me permitieran crear, escalar, mantener y optimizar el proyecto de forma segura y eficiente.

3. **Dise√±o:**  
   Se dise√±aron tanto las estructuras de datos m√≠nimas viables para la primera versi√≥n, como el aspecto gr√°fico de la aplicaci√≥n. Investigu√© sobre paletas de color, tipograf√≠as, tipos de iconos, y enfoqu√© el dise√±o en ofrecer una experiencia clara e intuitiva.

4. **Implementaci√≥n del software:**  
   El desarrollo del c√≥digo se realiz√≥ de forma iterativa. Me asegur√© de conectar backend y frontend desde el inicio, aplicando buenas pr√°cticas de modularizaci√≥n y control de versiones con GitHub.

5. **Pruebas:**  
   Realic√© pruebas funcionales centradas en formularios y algoritmos internos clave para asegurar que los datos importantes se mostraran correctamente al usuario final.

6. **Despliegue:**  
   Esta etapa a√∫n est√° en proceso. Ser√° la fase final, junto con el mantenimiento y posibles mejoras futuras.

En este documento encontrar√°s todo el proceso que me llev√≥ a crear esta primera versi√≥n de **TimeLoom**.

---

## üß† 2 Estado del Arte / Marco Te√≥rico

El control horario y la gesti√≥n del cumplimiento de turnos laborales es un reto com√∫n en empresas de todos los tama√±os. A lo largo de los a√±os han surgido distintas soluciones tecnol√≥gicas para automatizar este proceso, mejorar la eficiencia y cumplir con normativas laborales.

Actualmente existen plataformas como **Factorial**, **Sesame** o **Kronos**, que ofrecen servicios avanzados de gesti√≥n de personal. Estas herramientas suelen estar orientadas a empresas medianas o grandes, y requieren suscripciones de pago, lo que puede suponer una barrera para peque√±as empresas.

Por otro lado, la mayor√≠a de estas soluciones priorizan la gesti√≥n administrativa pero dejan de lado la experiencia del trabajador.

En cuanto a tecnolog√≠as, predominan las aplicaciones web desarrolladas con stacks como **React o Angular en el frontend** y **Node.js o Java en el backend**, con bases de datos relacionales y arquitecturas RESTful.

En cambio, se opt√≥ por un **stack moderno y flexible basado en JavaScript**, lo que permite rapidez en el desarrollo, modularidad, y una comunidad amplia. La arquitectura del sistema se basa en:

- **NestJS**: un framework backend para Node.js que sigue principios de dise√±o similares a los de Angular, ideal para crear APIs estructuradas y mantenibles.
- **NextJS**: framework frontend y full-stack basado en React, que permite renderizado h√≠brido (SSR/SSG), una gran experiencia de desarrollo y rendimiento √≥ptimo.
- **Turborepo**: herramienta de alto rendimiento para organizar m√∫ltiples paquetes en un monorepositorio, facilitando el desarrollo modular, la compartici√≥n de c√≥digo entre frontend y backend, y optimizando los tiempos de ejecuci√≥n de scripts y builds.

Este stack permite construir una aplicaci√≥n escalable, f√°cil de mantener y con una excelente experiencia de usuario, al mismo tiempo que se reduce la complejidad de despliegue gracias a la unificaci√≥n del lenguaje (JavaScript/TypeScript) en todo el proyecto.

**TimeLoom** se posiciona como una soluci√≥n ligera, accesible y personalizable para empresas que buscan cubrir sus necesidades b√°sicas de control horario, comunicaci√≥n y eventualmente, gesti√≥n de n√≥minas, sin depender de sistemas complejos o costosos.

Este proyecto busca aportar valor mediante una interfaz cuidada, un dise√±o funcional y una arquitectura modular que pueda escalar en el futuro.

---

## üìã 3 Requisitos

El sistema propuesto, TimeLoom, debe cumplir una serie de requisitos funcionales y no funcionales para garantizar su utilidad, escalabilidad y facilidad de uso.

### 3.1 Requisitos funcionales (RF)

- RF1: El sistema debe permitir a los trabajadores registrar su hora de entrada, pausas y salida.
- RF2: Los administradores deben poder visualizar el historial de fichajes de cada trabajador.
- RF3: El sistema debe generar reportes con las horas trabajadas por cada empleado.
- RF4: El sistema debe permitir la creaci√≥n de bonus y deducciones de cada contrato.
- RF5: El sistema debe incluir un sistema b√°sico de autenticaci√≥n de usuarios.
- RF6: El sistema debe permitir la comunicaci√≥n interna entre empleados (mensajer√≠a interna o notificaciones).
- RF7: El sistema debe guardar y mostrar correctamente el estado de cumplimiento del horario por parte de cada trabajador.

### 3.2 Requisitos no funcionales (RNF)

- RNF1: El sistema debe tener una interfaz intuitiva y f√°cil de usar.
- RNF2: La aplicaci√≥n debe ser accesible desde dispositivos m√≥viles y de escritorio.
- RNF3: El backend debe ofrecer una API REST estructurada y segura.
- RNF4: Los tiempos de respuesta del sistema no deben superar los 500ms en condiciones normales de uso.
- RNF5: El sistema debe seguir una arquitectura modular, facilitando su mantenimiento y escalabilidad.
---

## üß± 4 Dise√±o

El dise√±o de TimeLoom se ha centrado en modularidad, escalabilidad y claridad. El modelo de datos se construy√≥ con Prisma y PostgreSQL, organizado en torno a una arquitectura de empresa que gestiona trabajadores, turnos, horarios, incidencias, n√≥minas y roles.

### 4.1 Arquitectura General

El proyecto est√° estructurado como un monorepositorio utilizando **Turborepo**, con separaci√≥n entre:

- **Frontend (NextJS):** interfaz de usuario moderna, responsive y de alto rendimiento.
- **Backend (NestJS):** API REST modular con TypeScript, usando Prisma para la capa de acceso a datos.
- **Base de datos PostgreSQL:** modelada en Prisma con relaciones fuertes y soporte para l√≥gica empresarial compleja.

```mermaid
graph TD
    UI[Usuario]
    FE[Frontend (Next.js)]
    BE[Backend (Nest.js)]
    DB[(PostgreSQL)]
    UI --> FE
    FE --> BE
    BE --> DB
```

### 4.2 Dise√±o de Datos
Las entidades principales se agrupan en √°reas funcionales del sistema:

üè¢ **Empresa y estructura organizativa**
- Company: entidad central del sistema. Cada empresa puede tener m√∫ltiples oficinas, empleados, roles y turnos.

- Office: localizaci√≥n f√≠sica de la empresa.

- Team, Rol, TeamRolUser, GlobalRol: gesti√≥n de equipos y roles asignados a empleados.

üë• **Gesti√≥n de empleados y contratos**
- User: representa al empleado, incluyendo perfil, oficina asignada y empresa.

- Contract: almacena informaci√≥n contractual como salario, tipo de contrato (FIXED, TEMPORARY, FREELANCE).

- WorkWeek, WorkHour: control de planificaci√≥n y horas trabajadas (normales y extra).

‚è±Ô∏è **Control horario y pausas**
- TimeEntry: registro de entrada y salida diaria de los empleados.

- TimeBreak: pausas dentro de una jornada, con duraci√≥n, tipo (PauseType) y localizaci√≥n opcional.

üîî **Notificaciones e incidencias**
- Notification: avisos entre responsables y empleados, con estados (PENDING, READ, etc.).

- Indicent: registro de incidencias (llegadas tarde, ausencias, etc.), con tipo (IncidentType) y estado de revisi√≥n (IncidentStatus).

üí∞ **N√≥mina y deducciones**
- Payroll: gestiona cada per√≠odo de pago, incluyendo salario bruto, bonificaciones, deducciones y neto.

- Deduction y Bonus: elementos asociados al contrato que afectan el salario final.

### 4.3 Dise√±o de la Interfaz

Para el dise√±o de la interfaz se llev√≥ a cabo un estudio exhaustivo utilizando la herramienta Figma, donde se construy√≥ un sistema de dise√±o completo. A partir de este sistema se generaron varios prototipos interactivos, evaluando m√∫ltiples combinaciones de paletas de colores con el objetivo de lograr una est√©tica profesional que transmita confianza, claridad y modernidad al usuario final.

El dise√±o de la UI se basa en los siguientes principios:

- ‚úÖ **Estructura clara** con navegaci√≥n lateral que permite acceder f√°cilmente a las secciones principales: Dashboard, Fichajes, Turnos, N√≥minas, etc.

- üé® **Paleta de colores profesional**, seleccionada tras varias iteraciones para favorecer la legibilidad y generar una identidad visual s√≥lida.

- üî§ **Tipograf√≠a accesible y jer√°rquica**, junto a componentes visuales reutilizables que garantizan coherencia en toda la interfaz.

- üë•**Interfaces adaptadas al rol del usuario**, diferenciando entre trabajadores, administradores y responsables de RRHH, mostrando solo la informaci√≥n relevante en cada caso.

- üì± **Dise√±o responsive** desde el inicio, asegurando la correcta visualizaci√≥n y usabilidad en dispositivos m√≥viles y de escritorio.